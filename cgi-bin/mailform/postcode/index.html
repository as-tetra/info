<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=shift_jis">
		<title>郵便番号から住所入力</title>
	</head>
	<body style="margin:0px;">
		<script type="text/javascript">
		<!--
			var flag = 0;
			var city = "";
			var str = location.search;
			str = str.substring(1,str.length);
			var parameter = new Array();
			parameter = str.split(",");
			str = parameter[0];
			if(str != "")
			{
				var fileno = str.substring(0,2);
				document.write('<scri'+'pt type="text/javascript" src="pn'+fileno+'.js"></scri'+'pt>');
				flag = 1;
			}
		//-->
		</script>
		<center>
			<img src="postcode.gif" width="200" height="80">
		</center>
		<script type="text/javascript">
			if(flag)
			{
				var border = new Array("-", "−", "ー", "―", "ｰ", "‐");
				var number = str;
				for(var i = 0; i < border.length; i++){
					number = number.replace(border[i], "");
				}
				if(number.match(/[^0-9]+/)){
					alert("数字以外の文字が入力されています。もう一度確認して下さい。");
				}
				else if(!number.match(/^[0-9]{7}$/)){
					alert("郵便番号は、数字を7桁で入力して下さい。");
				}
				else{
					for(i=0;i < postcode.length;i++){
						if(postcode[i].indexOf(number,0) > -1){
							var pram = new Array();
							pram = postcode[i].split(",");
							//government 都道府県
							var city = pram[6] + pram[7] + pram[8];
							city = city.replace(/"/g,"");
							
							//ここにオープナー(親ウィンドウ)の住所を入れるフォーム名とエレメント名を入力
							//window.parent.opener.document.forms[parameter[1]].elements[parameter[2]].value = city;
							window.opener.setPostcode(city);
						}
					}
				}
			}
			window.close();
		</script>
	</body>
</html>
